<!DOCTYPE html>

<html lang="en" class="h-full">

<head>

  <!-- Metadata -->

  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Blue - Yung Kai | Lyricly</title>

  <meta name="theme-color" content="#000000" />

  <!-- Resources -->

  <!-- Styles -->

  <link rel="stylesheet" href="/style.css">

  <!-- Scripts -->

  <script src="https://cdn.tailwindcss.com"></script>

  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>

  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

  <!-- Motion art colors -->

  <style>
    :root {
      --gradient-color-1: #0a0c1b;
      --gradient-color-2: #1e3a8a;
      --gradient-color-3: #3b82f6;
    }
  </style>

</head>

<body class="h-screen moving-gradient text-white overflow-hidden">

  <div class="h-screen flex flex-col relative">

    <!-- Header -->

    <header class="fixed top-0 left-0 right-0 z-10 backdrop-blur bg-black/30">

      <div class="flex items-center justify-between px-4 py-2">

        <button class="text-2xl text-white/80 hover:text-white transition-colors mt-1">

          <ion-icon name="chevron-down-outline"></ion-icon>

        </button>

        <div class="text-center">

          <h1 class="text-xl font-bold tracking-tight">Lyricly</h1>

        </div>

        <button id="headerOptionsBtn" class="text-white/80 text-2xl hover:text-white mt-1">

          <ion-icon name="ellipsis-horizontal"></ion-icon>

        </button>

      </div>

    </header>

    <!-- Header Options Dropdown -->
    <div id="headerOptionsDropdown" class="hidden absolute right-2 top-12 mt-2 w-48 rounded-md backdrop-blur bg-black/30 focus:outline-none z-20">
      <div class="py-1 text-white text-sm" role="menuitem">
        <a href="#" class="block px-4 py-2">Add to Playlist</a>
        <a href="#" class="block px-4 py-2">View Album</a>
        <a href="#" class="block px-4 py-2">View Artist</a>
        <a href="#" class="block px-4 py-2">Share</a>
      </div>
    </div>

    <!-- Lyrics Container -->
    <main id="lyricsContainer" class="flex-1 overflow-y-auto px-4 pt-14 pb-56 lg:pt-24">
      <div id="lyrics" class="max-w-lg mx-auto"></div>
    </main>

    <!-- Player Controls -->
    <footer class="fixed bottom-0 left-0 right-0 z-10 backdrop-blur bg-black/30">
      <div class="max-w-lg mx-auto px-6 py-4 space-y-3">
        <!-- Song Info -->
        <div class="flex items-center justify-between">
          <div>
            <h2 class="text-lg font-semibold">Blue</h2>
            <p class="text-sm text-white/60">Yung Kai</p>
          </div>
          <button id="favoriteBtn" class="text-white/80 hover:text-white transition-colors heart-icon">
            <ion-icon name="heart-outline"></ion-icon>
          </button>
        </div>

        <!-- Progress Bar -->
        <div class="space-y-1">
          <input type="range" id="progressBar" class="w-full h-1 rounded-full progress-bar" min="0" max="100" value="0">
          <div class="flex justify-between text-xs text-white/60 font-medium">
            <span id="currentTime">0:00</span>
            <span id="duration">0:00</span>
          </div>
        </div>

        <!-- Controls -->
        <div class="flex items-center justify-between">
          <button id="previousBtn" class="text-3xl text-white/80 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
            <ion-icon name="play-skip-back"></ion-icon>
          </button>
          <button id="playPauseBtn" class="play-pause-btn">
            <ion-icon name="play"></ion-icon>
          </button>
          <button id="nextBtn" class="text-3xl text-white/80 hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
            <ion-icon name="play-skip-forward"></ion-icon>
          </button>
        </div>
      </div>
    </footer>
  </div>

  <audio id="audioPlayer" src="/blue.m4a" preload="metadata"></audio>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      let lyrics = [
        { time: 0, text: "♪ Intro", isSection: true },
        { time: 19, text: "Your morning eyes, I could stare like watching stars" },
        { time: 25, text: "I could walk you by, and I'll tell without a thought" },
        { time: 32, text: "You'd be mine, would you mind if I took your hand tonight?" },
        { time: 40, text: "Know you're all that I want this life" },
        { time: 46, text: "♪ Music ♪", isSection: true },
        { time: 47, text: "I'll imagine we fell in love" },
        { time: 50, text: "I'll nap under moonlight skies with you" },
        { time: 54, text: "I think I'll picture us, you with the waves" },
        { time: 58, text: "The ocean's colors on your face" },
        { time: 61, text: "I'll leave my heart with your air" },
        { time: 66, text: "So let me fly with you" },
        { time: 69, text: "Will you be forever with me?" },
        { time: 75, text: "♪ Music ♪", isSection: true },
        { time: 106, text: "My love will always stay by you" },
        { time: 112, text: "I'll keep it safe, so don't you worry a thing, I'll tell you I love you more" },
        { time: 121, text: "It's stuck with you forever, so promise you won't let it go" },
        { time: 128, text: "I'll trust the universe will always bring me to you" },
        { time: 136, text: "I'll imagine we fell in love" },
        { time: 139, text: "I'll nap under moonlight skies with you" },
        { time: 143, text: "I think I'll picture us, you with the waves" },
        { time: 146, text: "The ocean's colors on your face" },
        { time: 150, text: "I'll leave my heart with your air" },
        { time: 154, text: "So let me fly with you" },
        { time: 157, text: "Will you be forever with me?" },
        { time: 165, text: "♪ Credits", isSection: true },
        { time: 170, text: "Creator - Yung Kai" },
        { time: 175, text: "Editor - Bhavesh ✌️" }
      ];

      const lyricsContainer = document.getElementById('lyricsContainer');
      const lyricsElement = document.getElementById('lyrics');
      const audioPlayer = document.getElementById('audioPlayer');
      const playPauseBtn = document.getElementById('playPauseBtn');
      const progressBar = document.getElementById('progressBar');
      const currentTimeEl = document.getElementById('currentTime');
      const durationEl = document.getElementById('duration');
      const favoriteBtn = document.getElementById('favoriteBtn');
      const previousBtn = document.getElementById('previousBtn');
      const nextBtn = document.getElementById('nextBtn');
      const headerOptionsBtn = document.getElementById('headerOptionsBtn');
      const headerOptionsDropdown = document.getElementById('headerOptionsDropdown');

      let activeLyricIndex = -1;
      let isFavorite = false;

      function renderLyrics() {
        lyricsElement.innerHTML = '';
        lyrics.forEach((line, index) => {
          const p = document.createElement('p');
          p.textContent = line.text;
          if (line.isSection) {
            p.className = 'text-sm font-semibold text-white/60 uppercase tracking-wider mt-6 mb-2';
          } else {
            p.className = 'text-lg py-1 transition-all duration-300 ease-in-out cursor-pointer inactive-lyric';
          }
          p.dataset.index = index;

          p.addEventListener('click', () => {
            if (!line.isSection) {
              audioPlayer.currentTime = line.time;
              audioPlayer.play();
              updatePlayPauseButton();
              updateActiveLyric();
            }
          });

          lyricsElement.appendChild(p);
        });
      }

      function updateActiveLyric() {
        const currentTime = audioPlayer.currentTime;
        const newActiveIndex = lyrics.findIndex((lyric, i) =>
          currentTime >= lyric.time && (i === lyrics.length - 1 || currentTime < lyrics[i + 1].time)
        );

        if (newActiveIndex !== activeLyricIndex) {
          const lyricElements = lyricsElement.querySelectorAll('p');
          lyricElements.forEach((el, i) => {
            if (i === newActiveIndex) {
              el.classList.add('active-lyric');
              el.classList.remove('inactive-lyric');
              scrollToActiveLyric(el);
            } else {
              el.classList.remove('active-lyric');
              el.classList.add('inactive-lyric');
            }
          });
          activeLyricIndex = newActiveIndex;
        }
      }

      function scrollToActiveLyric(element) {
        const containerHeight = lyricsContainer.clientHeight;
        const elementTop = element.offsetTop;
        const elementHeight = element.clientHeight;
        const scrollPosition = elementTop - (containerHeight / 2) + (elementHeight / 2);
        lyricsContainer.scrollTo({
          top: scrollPosition,
          behavior: 'smooth'
        });
      }

      function formatTime(seconds) {
        const minutes = Math.floor(seconds / 60);
        const remainingSeconds = Math.floor(seconds % 60);
        return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
      }

      function updateProgressBar() {
        const progress = (audioPlayer.currentTime / audioPlayer.duration) * 100;
        progressBar.value = progress;
        currentTimeEl.textContent = formatTime(audioPlayer.currentTime);
      }

      function updatePlayPauseButton() {
        playPauseBtn.innerHTML = audioPlayer.paused ?
          '<ion-icon name="play"></ion-icon>' :
          '<ion-icon name="pause"></ion-icon>';
      }

      audioPlayer.addEventListener('loadedmetadata', () => {
        durationEl.textContent = formatTime(audioPlayer.duration);
      });

      audioPlayer.addEventListener('timeupdate', () => {
        updateProgressBar();
        updateActiveLyric();
      });

      playPauseBtn.addEventListener('click', () => {
        if (audioPlayer.paused) {
          audioPlayer.play();
        } else {
          audioPlayer.pause();
        }
        updatePlayPauseButton();
      });

      progressBar.addEventListener('input', () => {
        const time = (progressBar.value / 100) * audioPlayer.duration;
        audioPlayer.currentTime = time;
      });

      favoriteBtn.addEventListener('click', () => {
        isFavorite = !isFavorite;
        favoriteBtn.innerHTML = isFavorite ?
          '<ion-icon name="heart"></ion-icon>' :
          '<ion-icon name="heart-outline"></ion-icon>';
      });

      previousBtn.addEventListener('click', () => {
        console.log('Previous track');
      });

      nextBtn.addEventListener('click', () => {
        console.log('Next track');
      });

      audioPlayer.addEventListener('ended', () => {
        audioPlayer.pause();
        audioPlayer.currentTime = 0;
        updatePlayPauseButton();
      });

      function toggleDropdown(dropdown) {
        dropdown.classList.toggle('hidden');
      }

      function closeDropdowns() {
        headerOptionsDropdown.classList.add('hidden');
      }

      headerOptionsBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        toggleDropdown(headerOptionsDropdown);
      });

      document.addEventListener('click', closeDropdowns);

      renderLyrics();
      updatePlayPauseButton();

      audioPlayer.addEventListener('loadedmetadata', () => {
        durationEl.textContent = formatTime(audioPlayer.duration);
      });

      if (audioPlayer.readyState >= 2) {
        audioPlayer.dispatchEvent(new Event('loadedmetadata'));
      }
    });
  </script>
</body>

</html>
